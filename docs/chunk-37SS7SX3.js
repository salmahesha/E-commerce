import{Ab as F,B as w,C as b,Ga as U,Ia as L,Jb as C,K as _,Kb as z,O as E,Ob as d,S as D,Sa as u,Ta as T,Ua as P,W as A,Y as x,ba as y,da as M,kb as H,pa as j,qa as N,ua as $,va as a,wa as c,xa as g,xb as O,y as v}from"./chunk-TPVZDMZP.js";var k=(()=>{let e=class e{constructor(t,i){this.document=t,this.platformId=i,this.documentIsAccessible=O(this.platformId)}static getCookieRegExp(t){let i=t.replace(/([[\]{}()|=;+?,.*^$\\])/gi,"\\$1");return new RegExp("(?:^"+i+"|;\\s*"+i+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(t){return this.documentIsAccessible?(t=encodeURIComponent(t),e.getCookieRegExp(t).test(this.document.cookie)):!1}get(t){if(this.check(t)){t=encodeURIComponent(t);let r=e.getCookieRegExp(t).exec(this.document.cookie);return r?.[1]?e.safeDecodeURIComponent(r[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let t={},i=this.document;return i.cookie&&i.cookie!==""&&i.cookie.split(";").forEach(r=>{let[m,l]=r.split("=");t[e.safeDecodeURIComponent(m.replace(/^ /,""))]=e.safeDecodeURIComponent(l)}),t}set(t,i,r,m,l,f,R,V){if(!this.documentIsAccessible)return;if(typeof r=="number"||r instanceof Date||m||l||f||R){let S={expires:r,path:m,domain:l,secure:f,sameSite:R||"Lax",partitioned:V};this.set(t,i,S);return}let p=encodeURIComponent(t)+"="+encodeURIComponent(i)+";",s=r||{};if(s.expires)if(typeof s.expires=="number"){let S=new Date(new Date().getTime()+s.expires*1e3*60*60*24);p+="expires="+S.toUTCString()+";"}else p+="expires="+s.expires.toUTCString()+";";s.path&&(p+="path="+s.path+";"),s.domain&&(p+="domain="+s.domain+";"),s.secure===!1&&s.sameSite==="None"&&(s.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),s.secure&&(p+="secure;"),s.sameSite||(s.sameSite="Lax"),p+="sameSite="+s.sameSite+";",s.partitioned&&(p+="Partitioned;"),this.document.cookie=p}delete(t,i,r,m,l="Lax"){if(!this.documentIsAccessible)return;let f=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:f,path:i,domain:r,secure:m,sameSite:l})}deleteAll(t,i,r,m="Lax"){if(!this.documentIsAccessible)return;let l=this.getAll();for(let f in l)l.hasOwnProperty(f)&&this.delete(f,t,i,r,m)}};e.\u0275fac=function(i){return new(i||e)(w(_),w(D))},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let o=e;return o})();var h=class extends Error{};h.prototype.name="InvalidTokenError";function K(o){return decodeURIComponent(atob(o).replace(/(.)/g,(e,n)=>{let t=n.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function Q(o){let e=o.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return K(e)}catch{return atob(e)}}function G(o,e){if(typeof o!="string")throw new h("Invalid token specified: must be a string");e||(e={});let n=e.header===!0?0:1,t=o.split(".")[n];if(typeof t!="string")throw new h(`Invalid token specified: missing part #${n+1}`);let i;try{i=Q(t)}catch(r){throw new h(`Invalid token specified: invalid base64 for part #${n+1} (${r.message})`)}try{return JSON.parse(i)}catch(r){throw new h(`Invalid token specified: invalid json for part #${n+1} (${r.message})`)}}var I=class o{_HttpClient=b(F);_CookieService=b(k);_Router=b(C);userInfo;userEmail=E("");userName=E("");decodeToken(){this.userInfo=G(this._CookieService.get("token"))}signUp(e){return this._HttpClient.post(`${d.baseUrl}/api/v1/auth/signup`,e)}signIn(e){return this._HttpClient.post(`${d.baseUrl}/api/v1/auth/signin`,e)}forgotPassword(e){return this._HttpClient.post(`${d.baseUrl}/api/v1/auth/forgotPasswords`,e)}VerifyResetCode(e){return this._HttpClient.post(`${d.baseUrl}/api/v1/auth/verifyResetCode`,{resetCode:e})}resetPassword(e,n){return this._HttpClient.put(`${d.baseUrl}/api/v1/auth/resetPassword`,{email:e,newPassword:n})}updateLoggedUserPassword(e){return this._HttpClient.put(`${d.baseUrl}/api/v1/users/changeMyPassword`,e)}updateLoggedUserData(e){return this._HttpClient.put(`${d.baseUrl}/api/v1/users/updateMe/`,e)}signOut(){this._CookieService.delete("token"),this.userInfo=null,this._Router.navigate(["/login"]),localStorage.removeItem("userEmail")}static \u0275fac=function(n){return new(n||o)};static \u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})};function X(o,e){if(o&1&&g(0,"img",3),o&2){let n=L();$("src",n.imageUrl,A)}}function Y(o,e){o&1&&g(0,"i",4)}var J=class o{constructor(e,n,t){this._CookieService=e;this._AuthService=n;this._Router=t}userName=H("");userEmail;imageUrl;ngOnInit(){this.imageUrl=localStorage.getItem("URL")||"./images/1912-3.jpg",this.userEmail=localStorage.getItem("userEmail")}signOut(){this._CookieService.delete("token"),this._AuthService.userInfo=null,this._Router.navigate(["/login"]),localStorage.removeItem("userEmail")}log(e){let n=e.target;console.log(n.files),localStorage.setItem("URL",`./images/${n.files?.[0].name}`),this.imageUrl=localStorage.getItem("URL")}static \u0275fac=function(n){return new(n||o)(y(k),y(I),y(C))};static \u0275cmp=M({type:o,selectors:[["app-my-account"]],inputs:{userName:[1,"userName"]},decls:25,vars:3,consts:[[1,"main-section"],[1,"info","text-center"],["for","image",1,"text-9xl","cursor-pointer","flex","flex-wrap","justify-center","items-center"],["alt","",1,"size-44","rounded-full",3,"src"],[1,"fa-solid","fa-circle-user","text-gray-300"],["type","file","name","image","id","image",1,"w-full","hidden","cursor-pointer",3,"change"],[1,"font-extralight","text-sm","text-green-600","font-serif"],[1,"font-bold","text-2xl","my-2","font-serif","text-green-900"],[1,"text-sm"],["routerLink","/edit-profile",1,"my-8","font-sans","py-3","text-green-800","cursor-pointer","font-bold"],[1,"fa-solid","fa-pen-to-square","text-green-600","fa-xl"],[1,"my-8","font-sans","py-3","text-green-800","cursor-pointer","font-bold"],[1,"fa-solid","fa-location-pin-lock","text-green-600","fa-xl"],["routerLink","/updatePassword",1,"my-8","font-sans","py-3","text-green-800","cursor-pointer","font-bold"],[1,"fa-solid","fa-lock","text-green-600","fa-xl"],["routerLink","/allorders",1,"my-8","font-sans","py-3","text-green-800","cursor-pointer","font-bold"],[1,"fa-brands","fa-shopify","text-green-600","fa-xl"],[1,"bg-green-500","rounded-2xl","shadow-xl","mb-5","hover:bg-green-100","hover:text-black","duration-500","text-white","p-2","w-full",3,"click"]],template:function(n,t){n&1&&(a(0,"section",0)(1,"div",1)(2,"label",2),j(3,X,1,1,"img",3)(4,Y,1,0,"i",4),c(),a(5,"input",5),U("change",function(r){return t.log(r)}),c(),a(6,"p",6),u(7),c(),a(8,"p",7),u(9),c()(),a(10,"ul",8)(11,"li",9),g(12,"i",10),u(13," Edit Email"),c(),a(14,"li",11),g(15,"i",12),u(16," Shipping addresses"),c(),a(17,"li",13),g(18,"i",14),u(19," Update My password"),c(),a(20,"li",15),g(21,"i",16),u(22," My Orders"),c()(),a(23,"button",17),U("click",function(){return t.signOut()}),u(24,"LogOut"),c()()),n&2&&(x(3),N(t.imageUrl?3:4),x(4),T(t.userEmail),x(2),P(" ",t.userName()))},dependencies:[z],encapsulation:2})};export{k as a,I as b,J as c};
